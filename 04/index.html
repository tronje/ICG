<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>Blatt 04</title>
        
        <link rel="stylesheet" type="text/css" href="main.css">

        <script id="vertex-shader" type="x-shader/x-vertex">
            attribute vec4 vPosition;
            attribute vec4 vColor;

            uniform mat4 translationMatrix;
            uniform mat4 rotationMatrix;

            varying vec4 fColor;
            void main()
            {
                fColor = vColor;
                gl_Position = translationMatrix * rotationMatrix * vPosition;
                //gl_Position = vPosition;
            }
        </script>
        <script id="fragment-shader" type="x-shader/x-fragment">
            precision mediump float;

            //varying vec4 fColor;

            // NOTE: we now create the mouth through javascript. this was a pretty cool solution though,
            // so we're keeping it here

            // in this fragment shader, we want to create pacman's mouth
            // this basically 'only' requires us to specify a triangle
            // within the circle that is pacman, and color each fragment within white.

            // specify the triangle we want to cut out
            //const vec2 p1 = vec2(256.0, 256.0);
            //const vec2 p2 = vec2(512.0, 384.0);
            //const vec2 p3 = vec2(512.0, 128.0);

            /*
             * This function checks wether the current fragment is within our triangle;
             * the formula is enormous and ugly; it uses barycentric coordinates.
             * never again...
             */
            //bool inTriangle()
            //{
            //    float alpha = ((p2.y - p3.y)*(gl_FragCoord.x - p3.x) + (p3.x - p2.x)*(gl_FragCoord.y - p3.y)) /
            //                  ((p2.y - p3.y)*(p1.x - p3.x) + (p3.x - p2.x)*(p1.y - p3.y));
            //    float beta = ((p3.y - p1.y)*(gl_FragCoord.x - p3.x) + (p1.x - p3.x)*(gl_FragCoord.y - p3.y)) /
            //                 ((p2.y - p3.y)*(p1.x - p3.x) + (p3.x - p2.x)*(p1.y - p3.y));
            //    float gamma = 1.0 - alpha - beta;

            //    return (alpha > 0.0) && (beta > 0.0) && (gamma > 0.0);
            //}

            // main function
            void main()
            {
                // just make everything yellow...
                gl_FragColor = vec4(1.0, 1.0, 0.0, 1.0);

                // set the color to white if we're inside the triangle...
                //if (inTriangle())
                //{
                //    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
                //}
                //else // ... or leave it unchanged
                //{
                //    gl_FragColor = fColor;
                //}
            }
        </script>

        <script type="text/javascript" src="../Common/webgl-utils.js">
        </script>
        <script type="text/javascript" src="../Common/initShaders.js">
        </script>
        <script type="text/javascript" src="main.js">
        </script>
    </head>
    <body>
        <canvas id="gl-canvas" width="512" height="512">
            If you see this, your browser doesn't support WebGL.
        </canvas>
        
    </body>
</html>
